--- !define

BOOKKEEPING_DIR_URL: $(SYNC_BASE_URL)/instl
INFO_MAP_FILE_URL: $(SYNC_BASE_URL)/$(REPO_REV)/instl/info_map.txt

PARALLEL_SYNC: 32
CURL_CONFIG_FILE_NAME: Download-Thread
CURL_CONNECT_TIMEOUT: 6
CURL_MAX_TIME: 180
CURL_RETRIES: 6

LOCAL_SYNC_DIR: $(USER_CACHE_DIR)/$(SYNC_BASE_URL_MAIN_ITEM)
LOCAL_REPO_SYNC_DIR: $(LOCAL_SYNC_DIR)/$(REPO_NAME)
LOCAL_REPO_BOOKKEEPING_DIR: $(LOCAL_REPO_SYNC_DIR)/bookkeeping
HAVE_INFO_MAP_FILE_NAME: have_info_map.txt
HAVE_INFO_MAP_PATH: $(LOCAL_REPO_BOOKKEEPING_DIR)/$(HAVE_INFO_MAP_FILE_NAME)
# copy might read NEW_HAVE_INFO_MAP_PATH copy.sh is created before sync.sh was ran
# this will be indicated in the copy.yaml file
HAVE_INFO_MAP_FOR_COPY: $(HAVE_INFO_MAP_PATH)
NEW_HAVE_INFO_MAP_PATH: $(LOCAL_REPO_BOOKKEEPING_DIR)/new_$(HAVE_INFO_MAP_FILE_NAME)
REQUIRED_INFO_MAP_PATH: $(LOCAL_REPO_BOOKKEEPING_DIR)/required_info_map.txt
TO_SYNC_INFO_MAP_PATH: $(LOCAL_REPO_BOOKKEEPING_DIR)/to_sync_info_map.txt
LOCAL_REPO_REV_BOOKKEEPING_DIR: $(LOCAL_REPO_BOOKKEEPING_DIR)/$(REPO_REV)
LOCAL_COPY_OF_REMOTE_INFO_MAP_PATH: $(LOCAL_REPO_REV_BOOKKEEPING_DIR)/remote_info_map.txt
INSTL_HISTORY_PATH: $(SITE_REPO_BOOKKEEPING_DIR)/instl_history.txt
INSTL_HISTORY_TEMP_PATH: $(SITE_REPO_BOOKKEEPING_DIR)/instl_history.temp.txt
XCOPY_EXCLUDE_FILE_NAME: xcopy-exclude.txt
XCOPY_EXCLUDE_FILE_PATH: $(LOCAL_REPO_SYNC_DIR)/$(XCOPY_EXCLUDE_FILE_NAME)

# VENDOR_DIR_NAME should be overriden by the index.yaml file to reflect the specific vendor that created the install
VENDOR_DIR_NAME: ACME
SITE_BOOKKEEPING_DIR: $(__SITE_CONFIG_DIR__)
SITE_VENDOR_BOOKKEEPING_DIR: $(SITE_BOOKKEEPING_DIR)/$(VENDOR_DIR_NAME)
SITE_REPO_BOOKKEEPING_DIR: $(SITE_VENDOR_BOOKKEEPING_DIR)/$(REPO_NAME)
SITE_HAVE_INFO_MAP_PATH: $(SITE_REPO_BOOKKEEPING_DIR)/$(HAVE_INFO_MAP_FILE_NAME)

SITE_REQUIRE_FILE_NAME: require.yaml
SITE_REQUIRE_FILE_PATH: $(SITE_REPO_BOOKKEEPING_DIR)/$(SITE_REQUIRE_FILE_NAME)
NEW_SITE_REQUIRE_FILE_PATH: $(SITE_REPO_BOOKKEEPING_DIR)/new_$(SITE_REQUIRE_FILE_NAME)

# By default source folder are specified in the index without the OS prefix (Mac/Win)
SOURCE_PREFIX: $(TARGET_OS)


COPY_IGNORE_PATTERNS:
    - "*.done"

RSYNC_PERM_OPTIONS: a+rw,+X

WTAR_RATIO: 1.3

# usually copy is done from the sync folder, but using a separate variabe
# allows us to specify a different folder
COPY_SOURCES_ROOT_DIR: $(LOCAL_REPO_SYNC_DIR)

# if require.yaml exists REQUIRE_REPO_REV will be overriden
REQUIRE_REPO_REV: 0

# default version for iids that do not have explicity version
DEFAULT_IID_VERSION: 0.0.0
